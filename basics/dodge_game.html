<!DOCTYPE html>
<html>
    <head>
        <title>Dodge Game</title>
        <script src="https://pixijs.download/release/pixi.js"></script>
    </head>
    <body>
        <script type="module">
            // ref: https://medium.com/swlh/a-game-any-web-dev-can-build-in-10-mins-using-pixijs-47f8bcd85700
            let w = 512,
                h = 512;
            const app = new PIXI.Application();
            await app.init({ width: w, height: h, antialias: true, backgroundColor: "#456268" });
            document.body.appendChild(app.canvas);

            let monsters = [];
            let pressed = {};
            let player;
            let coin;
            let coins;

            class Circle {
                constructor(color, radius, v) {
                    let circle = new PIXI.Graphics();
                    circle.circle(0, 0, radius).fill(color);
                    circle.x = radius;
                    circle.y = radius;
                    app.stage.addChild(circle);

                    this.radius = radius;
                    this.v = v;
                    this.circle = circle;
                }
            }

            class Monster extends Circle {
                update() {
                    this.circle.x += this.v.x;
                    this.circle.y += this.v.y;

                    if (this.circle.x >= w - this.radius || this.circle.x <= this.radius) {
                        this.v.x *= -1;
                    }

                    if (this.circle.y >= h - this.radius || this.circle.y <= this.radius) {
                        this.v.y *= -1;
                    }
                }
            }

            const addMonster = () => {
                monsters.push(new Monster("#79a3b1", Math.random() * 10 + 10, { x: 2 + Math.random(), y: 2 + Math.random() }));
            };

            addMonster();

            app.ticker.add((ticker) => {
                // player.update();
                // coin.update();
                monsters.forEach((monster) => {
                    monster.update();
                });
            });
        </script>
    </body>
</html>
